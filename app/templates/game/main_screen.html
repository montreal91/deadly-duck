
{% extends "base.html" %}

{% block subtitle %}
    Season: {{ current_user.current_season_n }} Day: {{ current_user.current_day_n }}
{% endblock %}

{% block page_content %}
<div id="dd-main-screen-app">
  <div class="page-header">
    <h2>{{ club.club_name_c }}</h2>
  </div>
  <p>
    Ongoing season: <mark>{{ current_user.current_season_n }}</mark><br>
    Today is: <mark>{{ current_user.current_day_n }}</mark><br>
  </p>
  <div class="col-md-6">

  {% if match %}
    <h4>Upcoming match is</h4>
    <h3>{{ match.home_team }} versus {{ match.away_team }}</h3>
    {% if away_player %}
      <p>
        <label>Away Team Player:</label>
        <a href="{{ url_for('game.PlayerDetails', player_pk=away_player.pk_n)}}">
          {{ away_player.first_name_c[0] }}. {{ away_player.second_name_c[0] }}. {{ away_player.last_name_c }}
        </a>
        (<strong>{{ away_player.level }}</strong>)
      </p>
    {% endif %}
  {% else %}
    <h3>No matches for today</h3>
  {% endif %}
  <p>
    <button class="btn btn-primary btn-block" v-on:click="NextDay">
      Next Day
    </button>
  </p>
  <p>
    <a href="{{ url_for('game.Playoffs' ) }}" class="btn btn-default btn-block">
      PlayOffs
    </a>
  </p>
  <p>
    <a href="{{ url_for('game.Standings', season=current_user.current_season_n) }}" class="btn btn-default btn-block">Standings</a>
  </p>
  <p>
    <a href="{{ url_for('game.FreeAgents') }}" class="btn btn-default btn-block">Free Agents</a>
  </p>
  </div>
  <div class="col-md-6">

  <h3>Players</h3>

  <table class="table">
    <tr>
      <th>#</th>
      <th>Name</th>
      <th>Technique</th>
      <th>Endurance</th>
      <th>Level</th>
      <th>Age</th>
      <th></th>
    </tr>

    <tr
      v-for="(player, index) in players"
      v-bind:class="{info: player.pk === selected}"
    >
      <td v-text="index + 1"></td>
      <td>
        <button class="btn-link" v-text="PlayerName(player)" v-on:click="SelectPlayer(player)"></button>
      </td>
      <td>
        <strong v-text="FloatToFixed(player.actual_technique)"></strong> /
        <span v-text="FloatToFixed(player.technique)"></span>
      </td>
      <td v-text="FloatToFixed(player.endurance)"></td>
      <td v-text="player.level"></td>
      <td v-text="player.age"></td>
      <td>Details</td>
    </tr>

  </table>
</div>
{% endblock %}

{% block vue_templates %}
  {{ super() }}
  <script type="text/x-template" id="dd-vue-template-player-row">
  {% include "includes/current_match_or_standings.html" %}
  </script>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script type="text/javascript" src="{{url_for('static', filename='main_screen.js') }}"></script>
{% endblock %}
